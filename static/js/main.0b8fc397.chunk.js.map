{"version":3,"sources":["shared/eos/dfuse.ts","modules/root/logic.ts","shared/local-storage.ts","modules/root/store/token.ts","modules/user/store/index.ts","modules/root/store/index.ts","shared/hooks.ts","modules/user/components/NavBar.tsx","modules/root/theme.tsx","modules/root/components/TransfersFilter.tsx","modules/root/components/TransfersTable.tsx","modules/root/components/TransfersChart.tsx","modules/root/components/App.tsx","index.tsx"],"names":["client","createDfuseClient","apiKey","process","network","getTablesByScopes","code","table","scopes","block_num","a","stateTablesForScopes","blockNum","response","getActionTraces","tx","isMatchingTrace","matchingTraces","Array","traces","lifecycle","execution_trace","action_traces","length","curTrace","shift","push","isArray","inline_traces","map","trace","blockNumber","timestamp","Date","block_time","account","act","name","data","print","console","trxId","trx_id","globalSequence","Number","parseInt","String","receipt","global_sequence","receiveSequence","recv_sequence","actDigest","act_digest","searchTransactions","searchQuery","toBlock","actionTraceMatcher","cursor","Promise","race","res","rej","setTimeout","Error","limit","sort","message","details","errors","JSON","stringify","error","newTransactions","transactions","newActions","forEach","trans","actions","getColorForBucket","isPositive","bucket","computeLocalStorageKey","key","getLocalStorage","parseAsJson","val","localStorage","getItem","parse","setLocalStorage","jsonStringify","setItem","EOS_SYMBOL","precision","TokenStore","rootStore","shouldCancelFetching","cancelFetching","this","minBalanceFilter","userStore","accountName","_getAccount","amount","symbol","balance","precisionAdjustment","Math","pow","floor","parseFloat","runningAmount","result","sortedAction","transferActions","a1","a2","groupedActions","groupBy","action","Object","entries","index","sumAmount","BigNumber","biggestParty","biggestPartyAmount","isIncoming","to","decomposeAsset","quantity","plus","minus","abs","isGreaterThan","from","isGreaterThanOrEqualTo","minBalance","deltaQuantity","impact","party","values","compareFnFactory","shouldAscend","d1","d2","negativeSortedData","filter","positiveSortedData","d","concat","computeHistogram","trx","toNumber","groupedTransfers","x","y","dataPoints","groupedTransfersDataPoints","end","start","diff","getTime","NUM_TICKS","_","min","max","observable","array","computed","_fetchCurrentBalance","lastIrreversibleBlockNum","replace","isFetching","_fetchTransactions","_checkAccount","receiver","args","undefined","last_irreversible_block_num","accountsRows","tables","rows","balanceAmount","json","AccountStore","userName","onNewAccount","tokenStore","UserStore","fetchTokenInfo","init","initialized","storeContext","React","createContext","useStore","storeSelector","value","useContext","observer","useForm","handleSubmit","register","useState","setIsSubmitting","Flex","w","h","justifyContent","alignItems","maxW","Box","textTransform","letterSpacing","fontSize","fontWeight","onSubmit","handleUserNameSubmit","FormControl","isInvalid","Boolean","InputGroup","Input","placeholder","maxLength","autoFocus","focusBorderColor","ref","validate","isName","defaultValue","IconButton","variantColor","aria-label","icon","type","customTheme","theme","colors","brand","900","800","700","maxWidth","styled","flexDir","mb","Heading","as","handleMinBalanceFilterSubmit","children","test","ListItemBox","MyListItem","otherProps","isNegative","List","py","px","backgroundColor","toLocaleString","color","formatAsset","Link","display","lineHeight","href","formatBlockExplorerTransaction","isExternal","Code","slice","Icon","ml","marginX","marginY","size","position","Spinner","bottom","right","spacing","props","useTheme","zoomDomain","selectedDomain","state","setState","chartWidth","sizes","height","marginTop","marginBottom","width","scale","VictoryTheme","material","domain","padding","left","top","domainPadding","style","stroke","teal","labels","fill","datum","labelComponent","crossAxis","tickLabels","gray","axis","grid","dependentAxis","containerComponent","responsive","brushStyle","fillOpacity","brushDomain","onBrushDomainChange","tickValues","groupedTransfersDates","tickFormat","toLocaleDateString","StoreProvider","Provider","useEffect","ThemeProvider","ColorModeProvider","CSSReset","log","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0b8fc397.chunk.js","sourcesContent":["import {\n  createDfuseClient,\n  SearchTransactionRow,\n  ActionTrace\n} from \"@dfuse/client\";\nimport { TEosAction } from \"@deltalabs/eos-utils\";\nimport { TActionTraceMatcher, TActionInfo } from \"types/dfuse\";\n\nexport interface SingleTableScopeResult<T> {\n  last_irreversible_block_id: string;\n  last_irreversible_block_num: number;\n  rows: TableScopeRowResult<T>[];\n}\n\nexport interface TableScopesResult<T> {\n  last_irreversible_block_id: string;\n  last_irreversible_block_num: number;\n  tables: TableScopeResult<T>[];\n}\n\nexport interface TableScopeResult<T> {\n  account: string;\n  scope: string;\n  rows: TableScopeRowResult<T>[];\n}\n\nexport interface TableScopeRowResult<T> {\n  key: string;\n  payer: string;\n  json: T;\n}\n\nexport interface TableScopes {\n  block_num: number;\n  scopes: string[];\n}\n\nconst DFUSE_API_KEY = process.env.REACT_APP_DFUSE_API_KEY;\nif (!DFUSE_API_KEY)\n  throw new Error(`No REACT_APP_DFUSE_API_KEY env var passed`);\n\nconst client = createDfuseClient({\n  apiKey: DFUSE_API_KEY,\n  network: `mainnet`\n});\n\nexport async function getTableScopes(\n  code: string,\n  table: string,\n  block_num: number\n) {\n  try {\n    const response = await client.stateTableScopes(code, table, {\n      blockNum: block_num\n    });\n    return (response as unknown) as TableScopes;\n  } catch (e) {\n    throw e;\n  }\n}\n\nexport async function getTablesByScopes<T>(\n  code: string,\n  table: string,\n  scopes: string[],\n  block_num?: number\n): Promise<TableScopesResult<T>> {\n  try {\n    const response = await client.stateTablesForScopes<T>(code, scopes, table, {\n      blockNum: block_num\n    });\n    return (response as unknown) as TableScopesResult<T>;\n  } catch (e) {\n    throw e;\n  }\n}\n\nconst getActionTraces = (tx: SearchTransactionRow, isMatchingTrace: TActionTraceMatcher):TActionInfo[] => {\n  const matchingTraces = new Array<ActionTrace<any>>();\n\n  // BFS through transaction traces\n  const traces = tx.lifecycle.execution_trace!.action_traces;\n  while (traces.length > 0) {\n    const curTrace = traces.shift()!;\n\n    if (isMatchingTrace(curTrace)) {\n      matchingTraces.push(curTrace);\n    }\n\n    if (Array.isArray(curTrace.inline_traces)) {\n      traces.push(...curTrace.inline_traces);\n    }\n  }\n\n  return matchingTraces.map(trace => {\n    return {\n      blockNumber: trace.block_num,\n      timestamp: new Date(`${trace.block_time}Z`),\n      account: trace.act.account,\n      name: trace.act.name,\n      data: trace.act.data,\n      print: trace.console,\n      trxId: trace.trx_id,\n      // https://github.com/EOSIO/eos/blob/master/libraries/chain/apply_context.cpp#L127\n      // global_sequence unique per non-failed transactions\n      globalSequence: Number.parseInt(String(trace.receipt.global_sequence), 10),\n      // recv_sequence unique per contract, is a counter incremeted each time account is a receiver\n      receiveSequence: Number.parseInt(String(trace.receipt.recv_sequence), 10),\n      // not necessarily unique as it just hashes the action data?\n      actDigest: trace.receipt.act_digest\n    };\n  });\n};\n\nexport async function* searchTransactions(\n  searchQuery: string,\n  toBlock: number,\n  actionTraceMatcher: TActionTraceMatcher\n): AsyncIterableIterator<ReturnType<typeof getActionTraces>> {\n  let response: any;\n  let cursor = ``;\n\n  do {\n    try {\n      // sometimes dfuse searchTransaction gets stuck on mainnet and takes ages or never returns\n      response = await Promise.race([\n        new Promise((res, rej) => {\n          setTimeout(() => {\n            rej(new Error(`searchTransactions took too long.`));\n          }, 20 * 1e3);\n        }),\n        client.searchTransactions(searchQuery, {\n          limit: 10,\n          sort: `desc`,\n          cursor\n        })\n      ]);\n    } catch (error) {\n      let message = error.message;\n      if (error.details && error.details.errors)\n        message = `${message}. ${JSON.stringify(error.details.errors)}`;\n\n      console.error(`dfuse: ${message}`);\n      // try again\n      continue;\n    }\n\n    cursor = response.cursor;\n\n    const newTransactions = response.transactions;\n    if (newTransactions && newTransactions[0]) {\n      const newActions = [] as ReturnType<typeof getActionTraces>;\n      newTransactions.forEach(trans => {\n        const actions = getActionTraces(trans, actionTraceMatcher);\n        newActions.push(...actions)\n      });\n      yield newActions;\n    }\n  } while (cursor !== ``);\n}\n\nexport const dfuseClient = client;\n","const NUM_BUCKETS = 5\nexport const computeHistogram = (data: {index: number, val: number}[]) => {\n  const compareFnFactory = (shouldAscend = true) => {\n    if(shouldAscend) return (d1, d2) => d1.val - d2.val\n    else return (d1, d2) => d2.val - d1.val\n  }\n  const negativeSortedData = data.filter(({ val }) => val < 0).sort(compareFnFactory(false))\n  const positiveSortedData = data.filter(({ val }) => val >= 0).sort(compareFnFactory(true))\n\n  // fill buckts equally\n  negativeSortedData.forEach((d, index) => {\n    (d as any).bucket = Math.floor((index / negativeSortedData.length) * NUM_BUCKETS)\n  })\n  positiveSortedData.forEach((d, index) => {\n    (d as any).bucket = Math.floor((index / positiveSortedData.length) * NUM_BUCKETS)\n  })\n\n  return negativeSortedData.concat(positiveSortedData) as {index: number, val: number, bucket: number}[]\n}\n\nexport const getColorForBucket = (isPositive: boolean, bucket:number) => {\n  const SHADES_OF_GREEN = [100, 200, 300, 400, 500]\n  const SHADES_OF_RED = [100, 200, 300, 400, 500]\n  if(isPositive) return `green.${[SHADES_OF_GREEN[bucket]]}`\n  else return `red.${[SHADES_OF_RED[bucket]]}`\n}","const LS_PREFIX = process.env.REACT_APP_NAME;\n\nconst computeLocalStorageKey = (key: string) => `${LS_PREFIX}-${key}`;\n\nexport const getLocalStorage = (key: string, parseAsJson = true) => {\n  const val = localStorage.getItem(computeLocalStorageKey(key));\n  if (!val) return undefined;\n\n  if (!parseAsJson) return val;\n\n  try {\n    return JSON.parse(val);\n  } catch {\n    return val;\n  }\n};\n\nexport const setLocalStorage = (\n  key: string,\n  val: any,\n  jsonStringify = true\n) => {\n  return localStorage.setItem(\n    computeLocalStorageKey(key),\n    jsonStringify ? JSON.stringify(val) : val\n  );\n};\n","import { decomposeAsset, formatAsset, TAsset } from \"@deltalabs/eos-utils\";\nimport BigNumber from \"bignumber.js\";\nimport { action, observable, computed } from \"mobx\";\nimport RootStore from \"modules/root/store\";\nimport { getTablesByScopes, searchTransactions } from \"shared/eos/dfuse\";\nimport { TAccountsRow } from \"types/tables\";\nimport groupBy from \"lodash/groupBy\";\nimport { TActionTraceMatcher, TActionInfo } from \"types/dfuse\";\nimport { computeHistogram } from \"../logic\";\nimport { setLocalStorage, getLocalStorage } from \"shared/local-storage\";\n\nconst EOS_SYMBOL = {\n  precision: 4,\n  code: `EOS`\n};\ntype TTransferData = {\n  from: string;\n  to: string;\n  quantity: string;\n  memo: string;\n};\nexport type TGroupedTransfer = {\n  trxId: string;\n  blockNumber: number;\n  timestamp: Date;\n  deltaQuantity: TAsset;\n  balance: TAsset;\n  party: string; // other trading party\n  impact: number; // value between [0, NUM_BUCKETS - 1] indicating the relative importance of deltaQuantity\n};\ntype TGroupedTransfers = {\n  [key: string]: TGroupedTransfer;\n};\nexport default class TokenStore {\n  rootStore: RootStore;\n  @observable balance?: TAsset = undefined;\n  @observable minBalanceFilter: string;\n  @observable public isFetching = false;\n  private shouldCancelFetching = false;\n  @observable private transferActions = observable.array<\n    TActionInfo<TTransferData>\n  >([]);\n\n  constructor(rootStore: RootStore) {\n    this.rootStore = rootStore;\n    this.minBalanceFilter = getLocalStorage(`minBalanceFilter`) || `0.01`;\n  }\n\n  @action handleMinBalanceFilterSubmit = (minBalanceFilter: string) => {\n    this.minBalanceFilter = minBalanceFilter;\n    setLocalStorage(`minBalanceFilter`, minBalanceFilter);\n  };\n\n  @computed private get minBalance() {\n    let amount = 0;\n    const symbol = this.balance!.symbol;\n    if (this.minBalanceFilter) {\n      const precisionAdjustment = Math.pow(10, symbol.precision);\n      amount = Math.floor(\n        Number.parseFloat(this.minBalanceFilter) * precisionAdjustment\n      );\n    }\n    return { amount, symbol };\n  }\n\n  public cancelFetching = async () => {\n    this.shouldCancelFetching = true\n  };\n\n  @action public fetchTokenInfo = async () => {\n    const {\n      balance,\n      lastIrreversibleBlockNum: blockNum\n    } = await this._fetchCurrentBalance();\n    this.balance = balance;\n    this.transferActions.replace([]);\n\n    try {\n      this.shouldCancelFetching = false;\n      this.isFetching = true;\n      await this._fetchTransactions(blockNum);\n    } catch(error) {\n      console.error(error.message)\n    } finally {\n      this.isFetching = false;\n    }\n  };\n\n  @action private _fetchTransactions = async toBlock => {\n    const accountName = this._checkAccount();\n    const actionTraceMatcher: TActionTraceMatcher = trace => {\n      if (trace.receipt.receiver !== accountName) return false;\n\n      return (\n        trace.act.account === `eosio.token` &&\n        trace.act.name === `transfer` &&\n        (trace.act.data.from === accountName ||\n          trace.act.data.to === accountName)\n      );\n    };\n    const args = [\n      `receiver:${accountName} account:eosio.token action:transfer`,\n      toBlock,\n      actionTraceMatcher\n    ];\n\n    for await (const traces of searchTransactions(args[0], args[1], args[2])) {\n      // stop fetching transfers for other account if we changed it\n      if (this.shouldCancelFetching) break;\n      this.transferActions.push(...traces);\n    }\n  };\n\n  @action private _fetchCurrentBalance = async () => {\n    this.balance = undefined;\n    const accountName = this._checkAccount();\n\n    const result = await getTablesByScopes<TAccountsRow>(\n      `eosio.token`,\n      `accounts`,\n      [accountName]\n    );\n    const lastIrreversibleBlockNum = result.last_irreversible_block_num;\n    const accountsRows = result.tables[0].rows;\n    let balanceAmount = new BigNumber(`0`);\n    if (accountsRows[0]) {\n      balanceAmount = decomposeAsset(accountsRows[0].json.balance).amount;\n    }\n    return {\n      balance: { amount: balanceAmount, symbol: EOS_SYMBOL },\n      lastIrreversibleBlockNum\n    };\n  };\n\n  private _getAccount(): string {\n    return this.rootStore.userStore.accountName;\n  }\n\n  private _checkAccount(): string {\n    const accountName = this._getAccount();\n    if (!accountName) throw new Error(`Must enter an account name first`);\n    return accountName;\n  }\n\n  @computed public get groupedTransfers(): TGroupedTransfers {\n    const accountName = this._getAccount();\n    if (!accountName || !this.balance) return {};\n\n    let runningAmount = this.balance.amount;\n    const symbol = this.balance.symbol;\n\n    const result: TGroupedTransfers = {};\n    const sortedAction = this.transferActions.sort(\n      (a1, a2) => a2.blockNumber - a1.blockNumber\n    );\n    const groupedActions = groupBy(sortedAction, action => action.trxId);\n    Object.entries(groupedActions).forEach(([trxId, actions], index) => {\n      let sumAmount = new BigNumber(`0`);\n      let biggestParty = ``;\n      let biggestPartyAmount = new BigNumber(`0`);\n      actions.forEach(action => {\n        const isIncoming = action.data.to === accountName;\n        const amount = decomposeAsset(action.data.quantity).amount;\n        sumAmount = isIncoming\n          ? sumAmount.plus(amount)\n          : sumAmount.minus(amount);\n        if (amount.abs().isGreaterThan(biggestPartyAmount)) {\n          biggestPartyAmount = amount.abs();\n          biggestParty = isIncoming ? action.data.from : action.data.to;\n        }\n      });\n\n      // filter results by minBalance\n      // always show latest transfer such that the correct current balance is displayed\n      const isLatestTransfer = index === 0;\n      if (\n        isLatestTransfer ||\n        sumAmount.abs().isGreaterThanOrEqualTo(this.minBalance.amount)\n      ) {\n        const [action] = actions;\n        result[trxId] = {\n          trxId: action.trxId,\n          blockNumber: action.blockNumber,\n          timestamp: action.timestamp,\n          deltaQuantity: { amount: sumAmount, symbol },\n          balance: { amount: runningAmount, symbol },\n          impact: 0,\n          party: biggestParty\n        };\n      }\n      runningAmount = runningAmount.minus(sumAmount);\n\n    });\n\n    const transactions = Object.values(result);\n    const histogram = computeHistogram(\n      transactions.map((trx, index) => ({\n        index,\n        val: trx.deltaQuantity.amount.toNumber()\n      }))\n    );\n\n    histogram.forEach(d => {\n      transactions[d.index].impact = d.bucket;\n    });\n\n    return result;\n  }\n\n  @computed public get groupedTransfersDataPoints() {\n    if (!this.balance) return [];\n\n    const precisionAdjustment = Math.pow(10, this.balance!.symbol.precision);\n    return Object.values(this.groupedTransfers).map(trx => ({\n      x: trx.timestamp,\n      y: trx.balance.amount.toNumber() / precisionAdjustment\n    }));\n  }\n\n  @computed public get groupedTransfersDates() {\n    const NUM_TICKS = 6;\n    const dataPoints = this.groupedTransfersDataPoints;\n    if (dataPoints.length < 2) return [];\n    const end = dataPoints[0].x;\n    const start = dataPoints[dataPoints.length - 1].x;\n    const diff = end.getTime() - start.getTime();\n\n    return Array.from(\n      { length: NUM_TICKS + 1 },\n      (_, index) =>\n        new Date(start.getTime() + Math.floor(index * (diff / NUM_TICKS)))\n    );\n  }\n\n  @computed public get chartRange() {\n    const values = this.groupedTransfersDataPoints.map(({ y }) => y);\n    return [Math.min(...values) * 0.5, Math.max(...values) * 1.05];\n  }\n}\n","import { action, computed, observable } from \"mobx\";\nimport RootStore from \"modules/root/store\";\nimport { getLocalStorage, setLocalStorage } from \"shared/local-storage\";\n\nexport default class AccountStore {\n  rootStore: RootStore;\n  @observable public accountName = ``;\n  @observable public networkName = `mainnet`;\n\n  constructor(rootStore: RootStore) {\n    this.rootStore = rootStore;\n  }\n\n  @action handleUserNameSubmit = (userName: string) => {\n    this.accountName = userName;\n    setLocalStorage(`accountName`, userName);\n    this.rootStore.onNewAccount()\n  };\n\n  @action init = async () => {\n    this.accountName = getLocalStorage(`accountName`) || ``;\n    if(this.accountName) {\n      this.rootStore.onNewAccount()\n    }\n  };\n}\n","import React from 'react';\nimport { observable } from \"mobx\";\nimport TokenStore from './token';\nimport UserStore from 'modules/user/store';\n\nexport default class RootStore {\n    @observable initialized = false;\n    tokenStore = new TokenStore(this);\n    userStore = new UserStore(this);\n\n    async init() {\n        // wait until user store is initialized before initializing other stores\n        await this.userStore.init();\n        this.initialized = true;\n    }\n\n    public onNewAccount = async () => {\n        try {\n            await this.tokenStore.fetchTokenInfo()\n        } catch (error) {\n            console.error(`Error fetching token info:`, error.message)\n        }\n    }\n}\n\nexport const rootStore = new RootStore();\nexport const storeContext = React.createContext<RootStore>(rootStore);\n","import { useContext, useEffect } from 'react';\nimport RootStore, { storeContext } from 'modules/root/store';\n\nexport const useStore = <Store>(storeSelector: (rootStore: RootStore) => Store) => {\n    const value = useContext(storeContext);\n    if (!value) {\n        throw new Error(`storeContext does not have any value`);\n    }\n    const store = storeSelector(value);\n    return store;\n};\n\nexport const useOnClickOutside = (ref, handler) => {\n    useEffect(() => {\n        const listener = event => {\n            // Do nothing if clicking ref's element or descendent elements\n            if (!ref.current || ref.current.contains(event.target)) {\n                return;\n            }\n\n            handler(event);\n        };\n\n        document.addEventListener('mousedown', listener);\n        document.addEventListener('touchstart', listener);\n\n        return () => {\n            document.removeEventListener('mousedown', listener);\n            document.removeEventListener('touchstart', listener);\n        };\n    }, [ref, handler]);\n};\n","import React, { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { isName } from \"@deltalabs/eos-utils/dist/name\";\nimport {\n  Box,\n  Flex,\n  IconButton,\n  Input,\n  InputGroup,\n  InputRightElement,\n  Stack,\n  FormControl\n} from \"@chakra-ui/core\";\nimport { useStore } from \"shared/hooks\";\nimport { observer } from \"mobx-react\";\n\nconst NavBar: React.FC = () => {\n  const [userStore, tokenStore] = useStore(rootStore => [rootStore.userStore, rootStore.tokenStore]);\n\n  const { handleSubmit, errors, register } = useForm();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const onSubmit = values => {\n    setIsSubmitting(true);\n    if(tokenStore.isFetching) {\n      tokenStore.cancelFetching()\n    } else {\n      userStore.handleUserNameSubmit(values.name)\n    }\n    setIsSubmitting(false);\n  };\n\n  const validateName = value => {\n    return isName(value) ? true : `Not a valid EOSIO account name`;\n  };\n\n  return (\n    <Flex w=\"100%\" h=\"16\" justifyContent=\"center\" alignItems=\"center\">\n      <Flex\n        w=\"100%\"\n        maxW=\"4xl\"\n        alignItems=\"center\"\n        justifyContent=\"space-between\"\n      >\n        <Box\n          textTransform=\"uppercase\"\n          letterSpacing=\"tight\"\n          fontSize=\"xl\"\n          fontWeight=\"bold\"\n        >\n          Token Portfolio\n        </Box>\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <FormControl isInvalid={Boolean(errors.name)}>\n            <InputGroup>\n              <Input\n                name=\"name\"\n                placeholder=\"account\"\n                w=\"64\"\n                maxLength={13}\n                autoFocus\n                focusBorderColor=\"teal.200\"\n                ref={register({ validate: validateName })}\n                defaultValue={userStore.accountName}\n              />\n              <InputRightElement>\n                <IconButton\n                  variantColor=\"teal\"\n                  aria-label=\"Search\"\n                  fontSize=\"20px\"\n                  icon={tokenStore.isFetching ? `close` : `search`}\n                  type=\"submit\"\n                />\n              </InputRightElement>\n            </InputGroup>\n          </FormControl>\n        </form>\n      </Flex>\n    </Flex>\n  );\n};\n\nexport default observer(NavBar);\n","import { theme } from \"@chakra-ui/core\";\n\n// Let's say you want to add custom colors\nconst customTheme = {\n  ...theme,\n  colors: {\n    ...theme.colors,\n    brand: {\n      900: \"#1a365d\",\n      800: \"#153e75\",\n      700: \"#2a69ac\",\n    },\n  },\n  maxWidth: 1280,\n};\n\nexport default customTheme","import { observer } from \"mobx-react\";\nimport React, { useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { useStore } from \"shared/hooks\";\nimport {\n  formatAsset,\n  formatBlockExplorerTransaction\n} from \"@deltalabs/eos-utils\";\nimport {\n  Box,\n  Flex,\n  IconButton,\n  Input,\n  InputGroup,\n  InputRightElement,\n  Stack,\n  FormControl,\n  InputLeftAddon,\n  Heading\n} from \"@chakra-ui/core\";\nimport { TGroupedTransfer } from \"modules/root/store/token\";\nimport { getColorForBucket } from \"../logic\";\nimport { useForm } from \"react-hook-form\";\n\nconst ListItemBox = styled(Box)`\n  display: inline-block;\n  text-align: center;\n`;\n\nconst TransfersFilter: React.FC = () => {\n  const [userStore, tokenStore] = useStore(rootStore => [\n    rootStore.userStore,\n    rootStore.tokenStore\n  ]);\n\n  const { handleSubmit, errors, register } = useForm();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const onSubmit = values => {\n    setIsSubmitting(true);\n\n    tokenStore.handleMinBalanceFilterSubmit(values.minBalanceFilter);\n    setIsSubmitting(false);\n  };\n\n  const validateNumber = value => {\n    return /^\\d*(\\.\\d+){0,1}$/.test(value);\n  };\n\n  return (\n    <Flex flexDir=\"column\" alignItems=\"center\" w=\"100%\" mb=\"8\">\n      <Heading as=\"h4\" fontSize=\"lg\" mb=\"1\">\n        Filters\n      </Heading>\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <FormControl isInvalid={Boolean(errors.minBalanceFilter)}>\n          <InputGroup>\n            <InputLeftAddon children=\"Min Balance\" />\n            <Input\n              name=\"minBalanceFilter\"\n              placeholder=\"0.01\"\n              w=\"64\"\n              focusBorderColor=\"teal.200\"\n              ref={register({ validate: validateNumber })}\n              defaultValue={tokenStore.minBalanceFilter}\n            />\n            <InputRightElement>\n              <IconButton\n                variantColor=\"teal\"\n                aria-label=\"Apply Filter\"\n                fontSize=\"20px\"\n                icon=\"check\"\n                type=\"submit\"\n              />\n            </InputRightElement>\n          </InputGroup>\n        </FormControl>\n      </form>\n    </Flex>\n  );\n};\n\nexport default observer(TransfersFilter);\n","import { observer } from \"mobx-react\";\nimport React from \"react\";\nimport styled from \"@emotion/styled\";\nimport { useStore } from \"shared/hooks\";\nimport {\n  formatAsset,\n  formatBlockExplorerTransaction\n} from \"@deltalabs/eos-utils\";\nimport {\n  List,\n  ListItem,\n  ListIcon,\n  Flex,\n  Heading,\n  Box,\n  Link,\n  Icon,\n  Code,\n  Spinner\n} from \"@chakra-ui/core\";\nimport { TGroupedTransfer } from \"modules/root/store/token\";\nimport { getColorForBucket } from \"../logic\";\nimport TransfersFilter from \"./TransfersFilter\";\n\nconst ListItemBox = styled(Box)`\n  display: inline-block;\n  text-align: center;\n`;\n\n// const ListItemHeaderBox = styled(ListItemBox)`\n//   text-transform: uppercase;\n//   font-size: 16px;\n// `;\n\nconst MyListItem: React.FC<{ trx: TGroupedTransfer }> = ({\n  trx,\n  ...otherProps\n}) => {\n  const isPositive = !trx.deltaQuantity.amount.isNegative();\n  return (\n    <ListItem py=\"4\" px=\"6\" backgroundColor=\"gray.700\" {...otherProps}>\n      <ListItemBox w=\"48\">{trx.timestamp.toLocaleString()}</ListItemBox>\n      <ListItemBox w=\"32\">{trx.party}</ListItemBox>\n      <ListItemBox w=\"32\" color={getColorForBucket(isPositive, trx.impact)}>\n        {formatAsset(trx.deltaQuantity)}\n      </ListItemBox>\n      <ListItemBox w=\"48\" fontWeight={700}>\n        {formatAsset(trx.balance)}\n      </ListItemBox>\n      <ListItemBox w=\"32\">\n        <Link\n          display=\"flex\"\n          flexDir=\"row\"\n          alignItems=\"center\"\n          lineHeight=\"1.5em\"\n          href={formatBlockExplorerTransaction(`eosq`)(trx.trxId)}\n          isExternal\n        >\n          <Code backgroundColor=\"transparent\">\n            {trx.trxId.slice(0, 4)}..{trx.trxId.slice(-4)}\n          </Code>\n          <Icon name=\"external-link\" ml=\"1\" />\n        </Link>\n      </ListItemBox>\n    </ListItem>\n  );\n};\n\nconst TransfersTable: React.FC = () => {\n  const [tokenStore] = useStore(rootStore => [\n    rootStore.tokenStore\n  ]);\n\n  return (\n    <Flex\n      flexDir=\"column\"\n      alignItems=\"center\"\n      maxW=\"100%\"\n      w=\"6xl\"\n      marginX=\"auto\"\n      marginY=\"12\"\n    >\n      <Heading as=\"h2\" size=\"xl\" mb=\"4\" position=\"relative\">\n        <span>Your Transfers</span>\n        {tokenStore.isFetching && <Spinner bottom={2} right=\"-4\" ml=\"2\" position=\"absolute\" />}\n      </Heading>\n      <TransfersFilter />\n      <List spacing={1} fontSize=\"sm\">\n      <ListItem py=\"4\" px=\"6\" textTransform=\"uppercase\">\n      <ListItemBox w=\"48\">Time</ListItemBox>\n      <ListItemBox w=\"32\">Party</ListItemBox>\n      <ListItemBox w=\"32\">\n        Î” Balance\n      </ListItemBox>\n      <ListItemBox w=\"48\">\n        Balance\n      </ListItemBox>\n      <ListItemBox w=\"32\">\n        Transaction\n      </ListItemBox>\n    </ListItem>\n        {Object.values(tokenStore.groupedTransfers).map(trx => (\n          <MyListItem key={trx.trxId} trx={trx} />\n        ))}\n      </List>\n    </Flex>\n  );\n};\n\nexport default observer(TransfersTable);\n","import React, { useState } from \"react\";\nimport {\n  VictoryChart,\n  VictoryZoomContainer,\n  VictoryLine,\n  VictoryBrushContainer,\n  VictoryAxis,\n  VictoryTheme,\n  VictoryLabel,\n  VictoryTooltip\n} from \"victory\";\nimport { Flex, useTheme } from \"@chakra-ui/core\";\nimport { useStore } from \"shared/hooks\";\nimport { observer } from \"mobx-react\";\n\ntype State = {\n  zoomDomain: any;\n  selectedDomain: any;\n};\ntype Props = {};\nconst TransfersChart: React.FC<{}> = props => {\n  const [tokenStore] = useStore(rootStore => [rootStore.tokenStore]);\n  const theme = useTheme();\n\n  const [state, setState] = useState<State>({\n    zoomDomain: undefined,\n    selectedDomain: undefined\n  });\n\n  const handleBrush = domain => {\n    setState({ ...state, zoomDomain: domain });\n  };\n\n  const chartWidth = Number.parseInt(theme.sizes[`6xl`]) * 16 /* 1rem */;\n  const chartHeight = 480;\n\n  return (\n    <Flex\n      flexDir=\"column\"\n      alignItems=\"center\"\n      maxW=\"100%\"\n      w=\"6xl\"\n      height={chartHeight}\n      marginX=\"auto\"\n      marginTop=\"12\"\n      marginBottom=\"48\"\n    >\n      <VictoryChart\n        width={chartWidth}\n        height={chartHeight}\n        scale={{ x: \"time\" }}\n        theme={VictoryTheme.material}\n        domain={state.zoomDomain}\n        padding={{ left: 100, right: 50, top: 50, bottom: 50 }}\n        domainPadding={{ x: [10, 10], y: [10, 60]}}\n      >\n        <VictoryLine\n          style={{\n            data: { stroke: theme.colors.teal[500] },\n            labels: {\n              fontSize: 15,\n              fill: theme.colors.teal[500]\n            }\n          }}\n          data={tokenStore.groupedTransfersDataPoints}\n          labels={({ datum }) => datum.y}\n          labelComponent={<VictoryLabel />}\n        />\n        <VictoryAxis\n          crossAxis\n          style={{\n            tickLabels: {\n              fill: theme.colors.gray[`500`],\n              stroke: theme.colors.gray[`500`],\n              fontSize: 16\n            },\n            axis: { stroke: theme.colors.gray[`700`] },\n            grid: { stroke: theme.colors.gray[`700`] }\n          }}\n        />\n        <VictoryAxis\n          crossAxis\n          dependentAxis\n          style={{\n            tickLabels: {\n              fill: theme.colors.teal[`500`],\n              stroke: theme.colors.teal[`500`],\n              fontSize: 16\n            },\n            axis: { stroke: theme.colors.gray[`700`] },\n            grid: { stroke: theme.colors.gray[`700`] }\n          }}\n        />\n      </VictoryChart>\n\n      <VictoryChart\n        padding={{ top: 0, left: 50, right: 50, bottom: 30 }}\n        width={600}\n        height={90}\n        scale={{ x: \"time\" }}\n        theme={VictoryTheme.material}\n        containerComponent={\n          <VictoryBrushContainer\n            responsive={false}\n            brushStyle={{\n              stroke: \"transparent\",\n              fill: theme.colors.teal[200],\n              fillOpacity: 0.2\n            }}\n            brushDomain={state.selectedDomain}\n            onBrushDomainChange={handleBrush}\n          />\n        }\n      >\n        <VictoryAxis\n          tickValues={tokenStore.groupedTransfersDates}\n          tickFormat={x => (x as Date).toLocaleDateString()}\n          style={{\n            tickLabels: {\n              fill: theme.colors.gray[`500`],\n              stroke: theme.colors.gray[`500`],\n            },\n          }}\n        />\n        <VictoryLine\n          style={{\n            data: { stroke: theme.colors.teal[500] }\n          }}\n          data={tokenStore.groupedTransfersDataPoints}\n        />\n      </VictoryChart>\n    </Flex>\n  );\n};\n\nexport default observer(TransfersChart);\n","import React, { useEffect } from \"react\";\nimport { useStore } from \"shared/hooks\";\nimport {\n  ThemeProvider,\n  CSSReset,\n  ColorModeProvider,\n  DarkMode,\n  Spinner\n} from \"@chakra-ui/core\";\nimport { rootStore, storeContext } from \"../store\";\nimport NavBar from \"modules/user/components/NavBar\";\nimport customTheme from \"../theme\";\nimport TransfersTable from \"./TransfersTable\";\nimport TransfersChart from \"./TransfersChart\";\nimport { observer } from \"mobx-react\";\n\nexport const StoreProvider = ({ children }) => {\n  return (\n    <storeContext.Provider value={rootStore}>{children}</storeContext.Provider>\n  );\n};\n\nconst App: React.FC = () => {\n  const rootStore = useStore(rootStore => rootStore);\n\n  useEffect(() => {\n    if (!rootStore) console.error(`Rootstore not initialized yet.`);\n    rootStore.init();\n  }, [rootStore]);\n\n  return (\n    <StoreProvider>\n      <ThemeProvider theme={customTheme}>\n        <ColorModeProvider>\n          <DarkMode>\n            <CSSReset />\n            {rootStore.initialized ? (\n              <>\n                <NavBar />\n                <TransfersChart />\n                <TransfersTable />\n              </>\n            ) : (\n              <Spinner />\n            )}\n          </DarkMode>\n        </ColorModeProvider>\n      </ThemeProvider>\n    </StoreProvider>\n  );\n};\n\nexport default observer(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from 'modules/root/components/App';\nimport customTheme from 'modules/root/theme';\n\nconsole.log(`%c${process.env.REACT_APP_NAME}@${process.env.REACT_APP_VERSION}`,  `color: ${customTheme.colors.teal[`200`]}; font-size: 12px;`)\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}